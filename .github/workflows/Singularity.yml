name: Singularity

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  singularity-from-docker-image:
    runs-on: singularityware/singularity:latest
    steps:

      - name: Checkout
        uses: actions/checkout@v2
        
      - name: Singularity build
        run: singularity build singularity_image.sif docker://mehtapavan/ithacafv-manifest:5
        
      - name: moving
        run: cp singularity_image.sif /tutorials/CFD/01POD/
        
      - name: copying
        run: cp singularity/Of.sh /tutorials/CFD/01POD/
        
      - name: Run singulairty in batch mode
        run: singularity exec singularity_image.sif /bin/bash Of.sh
        
        
      
      
